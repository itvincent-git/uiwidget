;(function(b){b.uiwidget=b.uiwidget||{};b.uiwidget.ShortcutMenu=function(a,e){b.extend(this,e);this.shortcutMenu=a;this.init();this.render()};b.uiwidget.ShortcutMenu.prototype={addMenu:'新增快捷菜单',navMenu:'导航设置',more:'更多',nav:[],itemWidth:42,init:function(){var a=this;if(document.all){a.shortcutMenu.resize(function(){a.shortcutMenu.empty();a.render()})}else{b(window).resize(function(){a.shortcutMenu.empty();a.render()})}},render:function(){this.shortcutMenu.addClass('uiwidget-shortcut-nav uiwidget-shortcut-fast-nav');var d=parseInt(this.shortcutMenu.width()/this.itemWidth);this.nav.push('<ul>');this.renderShortcutBar(d);this.renderAddMenuItem(d);if(this.data.length>=d&&d>0){this.nav.push('</ul></div></li>')}this.nav.push('</ul>');this.shortcutMenu.append(this.nav.join(''));this.nav=[];var g=this;b('li.addOtherMenu',this.shortcutMenu).click(function(){if(typeof(g.onAddMenuItem)=='function')g.onAddMenuItem()});var f=b('div.hideMenu',g.shortcutMenu);b('li.hideMenuButton',this.shortcutMenu).click(function(a){var e=b(document.body).width();var c=parseInt(a.clientX)+f.width();if(c>=e)f.attr('className','hideMenu uiwidget-shortcut-fast-nav-more uiwidget-shortcut-fast-nav-more-right');else f.attr('className','hideMenu uiwidget-shortcut-fast-nav-more');f.fadeIn(100);a.stopPropagation()});b(document).click(function(){f.fadeOut(100)});b(document).blur(function(){f.fadeOut(100)});var h=this.hrefTarget;this.shortcutMenu.children().children().click(function(){if(b(this).attr('href')){if(typeof(g.changeBgColor)=='function'){g.changeBgColor(this)}b('#'+h).attr('src',b(this).attr('href'))}});b("ul.hideMenuUl").children().click(function(){if(b(this).attr('href'))b('#'+h).attr('src',b(this).attr('href'))});if(document.all){b('#'+h).focus(function(){f.fadeOut(100)})}},renderShortcutBar:function(a){for(var e=0;e<a;e++){if(this.data.length>=a&&e==a-1){break}var c=this.data[e];if(!c)break;this.nav.push('<li href="',c.href,'"><a href="javascript:void(0);"><img src="',c.icon,'" alt="',c.text,'" title="',c.text,'"/></a></li>')}if(this.data.length>=a&&a>0){for(var d=a-1;d<this.data.length;d++){if(d==a-1){this.nav.push('<li class="hideMenuButton"><div title="',this.more,'" class="shortcut-menu-more"></div>');this.nav.push('<div class="hideMenu uiwidget-shortcut-fast-nav-more" style="display:none;"><ul class="hideMenuUl">')}var c=this.data[d];this.nav.push('<li href="',c.href,'"><a href="javascript:void(0);"><img src="',c.icon,'" alt="',c.text,'" title="',c.text,'"/>',c.text,'</a></li>')}}else{this.nav.push('<li class="addOtherMenu"><div class="shortcut-menu-setting" title="',this.navMenu,'"></div></li>')}},renderAddMenuItem:function(a){if(this.data.length>=a&&a>0){this.nav.push('<li class="addOtherMenu uiwidget-shortcut-add"><a href="javascript:void(0);">',this.addMenu,'</a></li>')}},renderDropDownButton:function(){},renderDropDownMenu:function(){}};b.fn.shortcutMenu=function(a){return new b.uiwidget.ShortcutMenu(this,a)}})(jQuery);